{% extends "base.html.twig" %}

{% block title %}{{ parent() }} - {{ 'summary'|trans }} {% endblock %}

{% block body %}
        <div class="container">
                <div class="progress">
                        <div class="progress-bar progress-bar-info" role="progressbar" aria-valuenow="75"
                             aria-valuemin="0" aria-valuemax="100" style="width:75%">
                            {{ 'step' |trans }} 3/4
                        </div>
                </div>
                <div class="jumbotron jumbotron-fluid">
                        <h2 class="display-3">{{ 'order summary'|trans|capitalize }}</h2>
                        <hr class="my-4">
                                <ul>
                                        <li><span>{{ 'purchaseDate'|trans|capitalize }} : </span>{{ booking.purchaseDate|date('d/m/Y') }}</li>
                                        <li><span>{{ 'booking code'|trans|capitalize }} : </span>{{ booking.bookingCode }}</li>
                                        <li><span>{{ 'visit date'|trans|capitalize }} : </span>{{ booking.visitDate|date('d/m/Y') }}</li>
                                        <li><span>{{ 'you have booked'|trans|capitalize }} : </span>{{ booking.nbTickets }} {{ 'ticket(s)'|trans }}</li>
                                        <li><span>{{ 'ticket type'|trans|capitalize }} : </span> {{ booking.ticketTypeLabel |trans }}</li>
                                </ul>
                </div>

                <div class="form-group row">
                        <div class="col-md-8 col-md-offset-2">
                        <table class="table table-checkout table-hover">
                                <tbody>
                                {% for ticket in booking.tickets %}
                                        <tr>
                                                <td><strong>{{ 'visitor'|trans|capitalize }} {{ loop.index }}</strong></td>
                                                <td>{{ ticket.firstName }} {{ ticket.lastName }}</td>
                                                <td>{{ 'ticket'|trans|capitalize }} : {{ booking.ticketTypeLabel |trans }} </td>
                                                <td>{{ 'price'|trans|capitalize }} : {{ ticket.price }} {{ 'euros'|trans }}</td>
                                        </tr>
                                {% endfor %}
                                </tbody>
                        </table>
                        </div>
                </div>
            <div class="jumbotron jumbotron-fluid">

                <a class="button-back" href="{{ path('stepTwo') }}"> <button class="btn btn-light" name="return" type="button"> {{ 'modify my information'|trans }}</button></a>
                <a class="button-back" href="{{ path('stepOne') }}"> <button class="btn btn-light" name="return" type="button"> {{ 'modify my order'|trans }}</button></a>
            </div>
            <div class="jumbotron jumbotron-fluid">
                <h2 class="display-3">{{ 'total amount of your order'|trans|capitalize }} :  {{ booking.totalPrice }} {{ 'euros'|trans }} </h2>
                <hr class="my-4">
            <div class="row">
                <hr class="my-4">
                    <div class="col-md-4 col-md-offset-2">
                        <span>{{ 'thank you to proceed to the payment'|trans|capitalize }}</span>

                    </div>

            <div class="col-md-4 col-md-offset-1">
                <form action="{{ path('checkout') }}" method="POST">
                    <script
                            src="https://checkout.stripe.com/checkout.js" class="stripe-button"
                            data-key="pk_test_PqtahYtpdpmyehENH6z7TvqE"
                            data-amount="{{ booking.totalPrice *100 }}"
                            data-name="{{ 'louvre museum'|trans }}"
                            data-description="{{ 'payment'|trans }}"
                            data-locale="auto"
                            data-currency="eur"
                            data-label="{{ 'payment'|trans|capitalize }}">
                    </script>
                </form>
            </div>
            </div>
            </div>
        </div>

{% endblock %}
